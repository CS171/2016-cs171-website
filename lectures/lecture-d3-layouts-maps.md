---
layout: code-lecture
title:  Advanced D3&#58; Layouts and Maps
permalink: /lectures/lecture-d3-layouts-maps/
nomenu: true
---

*Material based on Scott Murray's book*

## Layouts

Layouts make it easier to lay elements representing your data out on the screen. While we've produced layouts ourselves already, we've only used simple position and size assignments that were directly driven by the data. In this lecture we will learn how to use D3's layout features to produce more complex layouts. 

Layouts don't actually draw things for us, rather they perform a data transformation that we can use to draw specific objects on the screen. Let's start with a simple example, a pie chart.

### A Pie Chart

Pie charts are not a very good visaulization technique, they have multiple weaknesses compared to their alternatives. We'll talk about those in class, but for now, we'll draw a pie chart because it's one of the simplest layouts we can do.

In the following example, we use the [D3 pie layout](https://github.com/mbostock/d3/wiki/Pie-Layout) to calculate the angles and the [D3.svg.arc](https://github.com/mbostock/d3/wiki/SVG-Shapes#arc) function to calculate the arcs used for drawing the wedges.

{% include code.html id="d3_pie" file="d3_pie.html" code="" js="false" preview="true" %}

![Pie data structure](images/pie.png)
The interesting intermediate stages here are the values produced by the pie layout and the path drawn by the arc function. The pie layout produces a specific data object that we can use to bind to the DOM elements, shown on the right. We ge an array with one ojbect for each wedge. The first member of the object is `data`, which stores the raw data. We also have `startAngel` and `endAngle` (in radians). <br /><br /> <br /> <br /> <br />  

The path that is generated by the arc function, is the second piece of information: `M1.1634144591899855e-14,-190A190,190 0 1,1 -176.58002257840997,-70.13911623486732L0,0Z`. This defines the actual path drawn.






